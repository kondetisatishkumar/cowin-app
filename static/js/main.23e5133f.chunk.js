(this["webpackJsonpcowin-app"]=this["webpackJsonpcowin-app"]||[]).push([[0],{26:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(19),s=n.n(r),i=(n(26),n(5)),o=n.n(i),l=n(7),u=n(2),d=n(8),j=n.n(d),b=n(6),f=n.n(b),m=n(4),p=n(9),v=n(21),O=n(0);function h(e){var t=e.columns,n=e.data,a=Object(c.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(""),f=Object(u.a)(b,2),h=f[0],x=f[1],g=Object(c.useState)(""),S=Object(u.a)(g,2),_=S[0],N=S[1],w=Object(p.useTable)({columns:t,data:n,initialState:{sortBy:[{id:"pincode",desc:!1}]}},p.useFilters,p.useSortBy),Y=w.getTableProps,y=w.getTableBodyProps,k=w.headerGroups,C=w.rows,D=w.prepareRow,A=w.setFilter;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"input-group row",children:[Object(O.jsx)("div",{className:"form-group col-sm",children:Object(O.jsx)("input",{className:"form-control",value:s,onChange:function(e){var t=e.target.value||"";A("name",t),i(t)},placeholder:"Search Hospital Name"})}),Object(O.jsx)("div",{className:"form-group col-sm",children:Object(O.jsx)("input",{className:"form-control",value:_,onChange:function(e){var t=e.target.value||"";A("address",t),N(t)},placeholder:"Search Address"})}),Object(O.jsx)("div",{className:"form-group col-sm",children:Object(O.jsx)("input",{className:"form-control",value:d,onChange:function(e){var t=e.target.value||"";A("block_name",t),j(t)},placeholder:"Search Block Name"})}),Object(O.jsx)("div",{className:"form-group col-sm",children:Object(O.jsx)("input",{className:"form-control",value:h,onChange:function(e){var t=e.target.value||"";A("pincode",t),x(t)},placeholder:"Search Pincode"})})]}),Object(O.jsxs)(v.a,Object(m.a)(Object(m.a)({className:"styled-table",striped:!0,bordered:!0,hover:!0,responsive:!0},Y()),{},{children:[Object(O.jsx)("thead",{children:k.map((function(e){return Object(O.jsx)("tr",Object(m.a)(Object(m.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(O.jsx)("th",Object(m.a)(Object(m.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:e.render("Header")}))}))}))}))}),Object(O.jsx)("tbody",Object(m.a)(Object(m.a)({},y()),{},{children:C.map((function(e,t){return D(e),Object(O.jsx)("tr",Object(m.a)(Object(m.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(O.jsx)("td",Object(m.a)(Object(m.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})}n(49);var x=function(e){var t=e.values,n=e.col;return Object(O.jsx)(O.Fragment,{children:t.map((function(e,t){return Object(O.jsx)("div",{children:Object(O.jsx)("span",{style:{whiteSpace:"nowrap"},children:e[n]})},t)}))})},g=function(e){var t=e.values,n=e.col;return Object(O.jsx)(O.Fragment,{children:t.map((function(e,t){return Object(O.jsx)("div",{children:Object(O.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[e[n]," (","D1:"," ",e.available_capacity_dose1,", ","D2:"," ",e.available_capacity_dose2,")"]})},t)}))})},S=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var _=function(e,t){return"All"===t?e:(t=parseInt(t),e.map((function(e){return e.sessions.filter((function(e){return e.min_age_limit===t})).length>0?e:void 0})).filter((function(e){return void 0!==e})))},N=function(e,t){return"All"===t?e:e.map((function(e){return e.sessions.filter((function(e){return e.vaccine===t})).length>0?e:void 0})).filter((function(e){return void 0!==e}))},w=function(e,t){return"All"===t?e:e.filter((function(e){return e.fee_type===t}))},Y=function(e){return e.map((function(e){return e.sessions.filter((function(e){return e.available_capacity>0})).length>0?e:void 0})).filter((function(e){return void 0!==e}))},y=[{vaccine_name:"COVISHIELD"},{vaccine_name:"COVAXIN"},{vaccine_name:"Sputnik V"}],k=[{fee_type:"Free"},{fee_type:"Paid"}],C=[{min_age_limit:18},{min_age_limit:45}];var D=function(){var e=function(){var e=Object(c.useState)(S()),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){a(S())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),t=(e.height,e.width),n=Object(c.useState)(!1),r=Object(u.a)(n,2),s=r[0],i=r[1],d=Object(c.useState)([]),b=Object(u.a)(d,2),m=b[0],p=b[1],v=Object(c.useState)([]),D=Object(u.a)(v,2),A=D[0],M=D[1],H=Object(c.useState)([]),I=Object(u.a)(H,2),P=I[0],F=I[1],B=Object(c.useState)([]),V=Object(u.a)(B,2),T=V[0],E=V[1],L=Object(c.useState)(y),R=Object(u.a)(L,2),z=R[0],G=(R[1],Object(c.useState)("")),J=Object(u.a)(G,2),W=J[0],q=J[1],X=Object(c.useState)(""),K=Object(u.a)(X,2),Q=K[0],U=K[1],Z=Object(c.useState)(""),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(""),ce=Object(u.a)(ne,2),ae=ce[0],re=ce[1],se=Object(c.useState)("All"),ie=Object(u.a)(se,2),oe=ie[0],le=ie[1],ue=Object(c.useState)("All"),de=Object(u.a)(ue,2),je=de[0],be=de[1],fe=Object(c.useState)("All"),me=Object(u.a)(fe,2),pe=me[0],ve=me[1],Oe=Object(c.useState)(!1),he=Object(u.a)(Oe,2),xe=he[0],ge=he[1],Se=a.a.createRef(),_e="http://maps.google.com/?q=",Ne=function(){ge(!1),M([]),q(f()().format("DD-MM-YYYY"))};Object(c.useEffect)((function(){q(f()().format("DD-MM-YYYY")),Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()("https://cdn-api.co-vin.in/api/v2/admin/location/states");case 2:t=e.sent,F(t.data.states);case 4:case"end":return e.stop()}}),e)})))()}),[]);var we=Object(c.useMemo)((function(){return[{Header:"Hospital",columns:[{Header:"Name",accessor:"name",Cell:function(e){return Object(O.jsxs)("a",{href:_e+e.value+", "+ee+", "+Q,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Address",accessor:"address",Cell:function(e){return Object(O.jsxs)("a",{href:_e+e.value+", "+ee+", "+Q,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Block",accessor:"block_name"},{Header:"Pincode",accessor:"pincode",Cell:function(e){return Object(O.jsxs)("a",{href:_e+e.value+", "+ee+", "+Q,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}}]},{Header:"Details",columns:[{Header:"Date",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(O.jsx)(x,{values:t,col:"date"})}},{Header:"Available Doses",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(O.jsx)(g,{values:t,col:"available_capacity"})}}]}]}),[ee,Q]),Ye=function(e,t){var n=e;switch(t){case"age":"All"!==pe&&(n=_(e,pe));break;case"fee":"All"!==je&&(n=w(e,je));break;case"vaccine":"All"!==oe&&(n=N(e,oe));break;default:console.log("Invalid choice")}return n},ye=function(e,t){switch(t){case"vaccine":e=Ye(e,"age"),e=Ye(e,"fee");break;case"fee":e=Ye(e,"age"),e=Ye(e,"vaccine");break;case"age":e=Ye(e,"fee"),e=Ye(e,"vaccine");break;default:console.log("Invalid Option")}return e},ke=function(e,n){t<760&&i(!0),U(n),p([]),E([]),Ne(),Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j()("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+e);case 2:n=t.sent,E(n.data.districts);case 4:case"end":return t.stop()}}),t)})))()},Ce=function(e,t){s&&Se.current.scrollIntoView({behavior:"smooth"});var n="";Ne();var c=W,a=ae;e&&(te(e.target.options[e.target.selectedIndex].text),n=e.target.value,re("Select"===(a=n)?"":a)),t&&q(c=t),Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Select"===a){e.next=7;break}return e.next=3,j()("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+a+"&date="+c);case 3:t=e.sent,n=Y(t.data.centers),p(n),n.length>0?(ge(!1),n=Ye(n,"vaccine"),n=Ye(n,"fee"),n=Ye(n,"age"),M(n)):ge(!0);case 7:case"end":return e.stop()}}),e)})))()},De=function(e){var t="";if("next"===e)t=f()(W,"DD-MM-YYYY").add(6,"d");else{var n=f()(W,"DD-MM-YYYY").subtract(6,"d"),c=f()();t=n.isBefore(c)?c:n}var a=t.format("DD-MM-YYYY");Ce("",a)};return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"jumbotron",children:Object(O.jsx)("h1",{children:"COWIN Availability Tracker"})}),Object(O.jsx)("form",{className:"form-inline",children:Object(O.jsxs)("div",{className:"input-group row",children:[Object(O.jsxs)("div",{className:"form-group col-sm",children:[Object(O.jsx)("label",{children:"State:"}),Object(O.jsxs)("select",{className:"form-control",id:"state",name:"state",onChange:function(e){return ke(e.target.value,e.target.options[e.target.selectedIndex].text)},children:[Object(O.jsx)("option",{children:"Select"}),P.map((function(e,t){return Object(O.jsx)("option",{value:e.state_id,children:e.state_name},t)}))]})]}),Object(O.jsxs)("div",{className:"form-group col-sm",children:[Object(O.jsx)("label",{children:"District:"}),Object(O.jsxs)("select",{className:"form-control",id:"dist",onChange:function(e){return Ce(e)},children:[Object(O.jsx)("option",{children:"Select"}),T.map((function(e,t){return Object(O.jsx)("option",{value:e.district_id,children:e.district_name},t)}))]})]}),Object(O.jsxs)("div",{className:"form-group col-sm",children:[Object(O.jsx)("label",{children:"Vaccine:"}),Object(O.jsxs)("select",{className:"form-control",id:"vaccine",onChange:function(e){return function(e){s&&Se.current.scrollIntoView({behavior:"smooth"}),le(e);var t=m;t=ye(t,"vaccine"),M(N(t,e))}(e.target.value)},children:[Object(O.jsx)("option",{children:"All"}),z.map((function(e,t){return Object(O.jsx)("option",{value:e.vaccine_name,children:e.vaccine_name},t)}))]})]}),Object(O.jsxs)("div",{className:"form-group col-sm",children:[Object(O.jsx)("label",{children:"Fees:"}),Object(O.jsxs)("select",{className:"form-control",id:"sel1",onChange:function(e){return function(e){s&&Se.current.scrollIntoView({behavior:"smooth"}),be(e);var t=m;t=ye(t,"fee"),M(w(t,e))}(e.target.value)},children:[Object(O.jsx)("option",{children:"All"}),k.map((function(e,t){return Object(O.jsx)("option",{value:e.fee_type,children:e.fee_type},t)}))]})]}),Object(O.jsxs)("div",{className:"form-group col-sm pb-2",children:[Object(O.jsx)("label",{children:"Age:"}),Object(O.jsxs)("select",{className:"form-control",id:"age",onChange:function(e){return function(e){s&&Se.current.scrollIntoView({behavior:"smooth"}),ve(e);var t=m;t=ye(t,"age"),M(_(t,e))}(e.target.value)},children:[Object(O.jsx)("option",{children:"All"}),C.map((function(e,t){return Object(O.jsx)("option",{value:e.min_age_limit,children:e.min_age_limit},t)}))]})]}),Object(O.jsxs)("div",{className:"btn-group-vertical col-sm",children:[Object(O.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm mb-1",disabled:!ae,onClick:function(e){return De("next")},children:[W," ",">>"]}),Object(O.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm mb-2",disabled:!ae,onClick:function(e){return De("prev")},children:[f()(W,"DD-MM-YYYY").add(6,"d").format("DD-MM-YYYY")," ","<<"]})]})]})}),Object(O.jsx)("div",{id:"mainTable",ref:Se,children:Object(O.jsx)(h,{columns:we,data:A})}),Object(O.jsx)("br",{}),xe&&Object(O.jsxs)("p",{className:"error",children:[" ","No Vaccination center is available for booking."," "]})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(50);s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(D,{})}),document.getElementById("root")),A()}},[[51,1,2]]]);
//# sourceMappingURL=main.23e5133f.chunk.js.map