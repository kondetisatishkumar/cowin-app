(this["webpackJsonpcowin-app"]=this["webpackJsonpcowin-app"]||[]).push([[0],{26:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(19),s=c.n(r),i=(c(26),c(5)),l=c.n(i),o=c(7),u=c(2),j=c(8),d=c.n(j),b=c(6),f=c.n(b),m=c(4),p=c(9),O=c(21),v=c(0);function h(e){var t=e.columns,c=e.data,a=Object(n.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),j=o[0],d=o[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),h=f[0],x=f[1],g=Object(n.useState)(""),N=Object(u.a)(g,2),S=N[0],_=N[1],Y=Object(p.useTable)({columns:t,data:c},p.useFilters,p.useSortBy),C=Y.getTableProps,k=Y.getTableBodyProps,y=Y.headerGroups,D=Y.rows,A=Y.prepareRow,w=Y.setFilter;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"input-group row",children:[Object(v.jsx)("div",{className:"form-group col-sm",children:Object(v.jsx)("input",{className:"form-control",value:s,onChange:function(e){var t=e.target.value||"";w("name",t),i(t)},placeholder:"Search Hospital Name"})}),Object(v.jsx)("div",{className:"form-group col-sm",children:Object(v.jsx)("input",{className:"form-control",value:S,onChange:function(e){var t=e.target.value||"";w("address",t),_(t)},placeholder:"Search Address"})}),Object(v.jsx)("div",{className:"form-group col-sm",children:Object(v.jsx)("input",{className:"form-control",value:j,onChange:function(e){var t=e.target.value||"";w("block_name",t),d(t)},placeholder:"Search Block Name"})}),Object(v.jsx)("div",{className:"form-group col-sm",children:Object(v.jsx)("input",{className:"form-control",value:h,onChange:function(e){var t=e.target.value||"";w("pincode",t),x(t)},placeholder:"Search Pincode"})})]}),Object(v.jsxs)(O.a,Object(m.a)(Object(m.a)({className:"styled-table",striped:!0,bordered:!0,hover:!0,responsive:!0},C()),{},{children:[Object(v.jsx)("thead",{children:y.map((function(e){return Object(v.jsx)("tr",Object(m.a)(Object(m.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsx)("th",Object(m.a)(Object(m.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:e.render("Header")}))}))}))}))}),Object(v.jsx)("tbody",Object(m.a)(Object(m.a)({},k()),{},{children:D.map((function(e,t){return A(e),Object(v.jsx)("tr",Object(m.a)(Object(m.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(v.jsx)("td",Object(m.a)(Object(m.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})}c(49);var x=function(e){var t=e.values,c=e.col;return Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsx)("div",{children:e[c]},t)}))})};var g=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(u.a)(r,2),i=s[0],j=s[1],b=Object(n.useState)([]),m=Object(u.a)(b,2),p=m[0],O=m[1],g=Object(n.useState)([]),N=Object(u.a)(g,2),S=N[0],_=N[1],Y=Object(n.useState)([{vaccine_name:"COVISHIELD"},{vaccine_name:"COVAXIN"}]),C=Object(u.a)(Y,2),k=C[0],y=(C[1],Object(n.useState)("")),D=Object(u.a)(y,2),A=D[0],w=D[1],M=Object(n.useState)(""),H=Object(u.a)(M,2),P=H[0],F=H[1],I=Object(n.useState)(""),B=Object(u.a)(I,2),T=B[0],V=B[1],E=Object(n.useState)(""),L=Object(u.a)(E,2),G=L[0],J=L[1],R=Object(n.useState)("All"),q=Object(u.a)(R,2),W=q[0],X=q[1],z=Object(n.useState)("All"),K=Object(u.a)(z,2),Q=K[0],U=K[1],Z=Object(n.useState)("All"),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(u.a)(ce,2),ae=ne[0],re=ne[1],se="http://maps.google.com/?q=",ie=function(e,t){return"All"===t?e:(t=parseInt(t),e.map((function(e){return e.sessions.filter((function(e){return e.min_age_limit===t})).length>0?e:void 0})).filter((function(e){return void 0!==e})))},le=function(e,t){return"All"===t?e:e.map((function(e){return e.sessions.filter((function(e){return e.vaccine===t})).length>0?e:void 0})).filter((function(e){return void 0!==e}))},oe=function(e,t){return"All"===t?e:e.filter((function(e){return e.fee_type===t}))},ue=function(){re(!1),j([]),w(f()().format("DD-MM-YYYY"))};Object(n.useEffect)((function(){w(f()().format("DD-MM-YYYY")),Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()("https://cdn-api.co-vin.in/api/v2/admin/location/states");case 2:t=e.sent,O(t.data.states);case 4:case"end":return e.stop()}}),e)})))()}),[]);var je=Object(n.useMemo)((function(){return[{Header:"Hospital",columns:[{Header:"Name",accessor:"name",Cell:function(e){return Object(v.jsxs)("a",{href:se+e.value+", "+T+", "+P,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Address",accessor:"address",Cell:function(e){return Object(v.jsxs)("a",{href:se+e.value+", "+T+", "+P,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Block",accessor:"block_name"},{Header:"Pincode",accessor:"pincode",Cell:function(e){return Object(v.jsxs)("a",{href:se+e.value+", "+T+", "+P,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}}]},{Header:"Details",columns:[{Header:"Date",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(v.jsx)(x,{values:t,col:"date"})}},{Header:"Available Capacity",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(v.jsx)(x,{values:t,col:"available_capacity"})}}]}]}),[]),de=function(e,t){switch(t){case"vaccine":e=be(e,"age"),e=be(e,"fee");break;case"fee":e=be(e,"age"),e=be(e,"vaccine");break;case"age":e=be(e,"fee"),e=be(e,"vaccine")}return e},be=function(e,t){var c=e;switch(t){case"age":"All"!==ee&&(c=ie(e,ee));break;case"fee":"All"!==Q&&(c=oe(e,Q));break;case"vaccine":"All"!==W&&(c=le(e,W));break;default:console.log("Invalid choice")}return c},fe=function(e,t){F(t),a([]),_([]),ue(),Object(o.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+e);case 2:c=t.sent,_(c.data.districts);case 4:case"end":return t.stop()}}),t)})))()},me=function(e,t){var c="";ue();var n=A,r=G;e&&(V(e.target.options[e.target.selectedIndex].text),c=e.target.value,J("Select"===(r=c)?"":r)),t&&w(n=t),Object(o.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Select"===r){e.next=7;break}return e.next=3,d()("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+r+"&date="+n);case 3:t=e.sent,s=t.data.centers,c=s.map((function(e){return e.sessions.filter((function(e){return e.available_capacity>0})).length>0?e:void 0})).filter((function(e){return void 0!==e})),a(c),c.length>0?(re(!1),c=be(c,"vaccine"),c=be(c,"fee"),c=be(c,"age"),j(c)):re(!0);case 7:case"end":return e.stop()}var s}),e)})))()},pe=function(e){var t="";if("next"===e)t=f()(A,"DD-MM-YYYY").add(6,"d");else{var c=f()(A,"DD-MM-YYYY").subtract(6,"d"),n=f()();t=c.isBefore(n)?n:c}var a=t.format("DD-MM-YYYY");me("",a)};return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"jumbotron",children:Object(v.jsx)("h1",{children:"COWIN Availability Tracker"})}),Object(v.jsx)("form",{className:"form-inline",children:Object(v.jsxs)("div",{className:"input-group row",children:[Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"State:"}),Object(v.jsxs)("select",{className:"form-control",id:"state",name:"state",onChange:function(e){return fe(e.target.value,e.target.options[e.target.selectedIndex].text)},children:[Object(v.jsx)("option",{children:"Select"}),p.map((function(e,t){return Object(v.jsx)("option",{value:e.state_id,children:e.state_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"District:"}),Object(v.jsxs)("select",{className:"form-control",id:"dist",onChange:function(e){return me(e)},children:[Object(v.jsx)("option",{children:"Select"}),S.map((function(e,t){return Object(v.jsx)("option",{value:e.district_id,children:e.district_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"Vaccine:"}),Object(v.jsxs)("select",{className:"form-control",id:"vaccine",onChange:function(e){return function(e){X(e);var t=c;t=de(t,"vaccine"),j(le(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),k.map((function(e,t){return Object(v.jsx)("option",{value:e.vaccine_name,children:e.vaccine_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"Fees:"}),Object(v.jsxs)("select",{className:"form-control",id:"sel1",onChange:function(e){return function(e){U(e);var t=c;t=de(t,"fee"),j(oe(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),[{fee_type:"Free"},{fee_type:"Paid"}].map((function(e,t){return Object(v.jsx)("option",{value:e.fee_type,children:e.fee_type},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"Age:"}),Object(v.jsxs)("select",{className:"form-control",id:"age",onChange:function(e){return function(e){te(e);var t=c;t=de(t,"age"),j(ie(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),[{min_age_limit:18},{min_age_limit:45}].map((function(e,t){return Object(v.jsx)("option",{value:e.min_age_limit,children:e.min_age_limit},t)}))]})]}),Object(v.jsxs)("div",{className:"btn-group-vertical col-sm",children:[Object(v.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm mb-2",disabled:!G,onClick:function(e){return pe("next")},children:[A," ",">>"]}),Object(v.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm",disabled:!G,onClick:function(e){return pe("prev")},children:[f()(A,"DD-MM-YYYY").add(5,"d").format("DD-MM-YYYY")," ","<<"]})]})]})}),Object(v.jsx)("br",{}),Object(v.jsx)(h,{columns:je,data:i}),Object(v.jsx)("br",{}),ae&&Object(v.jsxs)("p",{className:"error",children:[" ","No Vaccination center is available for booking."," "]})]})})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,52)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(50);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(g,{})}),document.getElementById("root")),N()}},[[51,1,2]]]);
//# sourceMappingURL=main.3e729141.chunk.js.map