(this["webpackJsonpcowin-app"]=this["webpackJsonpcowin-app"]||[]).push([[0],{26:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(19),s=n.n(r),i=(n(26),n(5)),o=n.n(i),l=n(7),u=n(2),d=n(8),j=n.n(d),b=n(6),f=n.n(b),m=n(4),p=n(9),O=n(21),v=n(0);function h(e){var t=e.columns,n=e.data,a=Object(c.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(""),f=Object(u.a)(b,2),h=f[0],g=f[1],x=Object(c.useState)(""),N=Object(u.a)(x,2),S=N[0],_=N[1],w=Object(p.useTable)({columns:t,data:n,initialState:{sortBy:[{id:"pincode",desc:!1}]}},p.useFilters,p.useSortBy),Y=w.getTableProps,C=w.getTableBodyProps,k=w.headerGroups,y=w.rows,D=w.prepareRow,A=w.setFilter;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"input-group row",children:[Object(v.jsx)("div",{className:"form-group col-sm mb-1",children:Object(v.jsx)("input",{className:"form-control",value:s,onChange:function(e){var t=e.target.value||"";A("name",t),i(t)},placeholder:"Search Hospital Name"})}),Object(v.jsx)("div",{className:"form-group col-sm mb-1",children:Object(v.jsx)("input",{className:"form-control",value:S,onChange:function(e){var t=e.target.value||"";A("address",t),_(t)},placeholder:"Search Address"})}),Object(v.jsx)("div",{className:"form-group col-sm mb-1",children:Object(v.jsx)("input",{className:"form-control",value:d,onChange:function(e){var t=e.target.value||"";A("block_name",t),j(t)},placeholder:"Search Block Name"})}),Object(v.jsx)("div",{className:"form-group col-sm",children:Object(v.jsx)("input",{className:"form-control",value:h,onChange:function(e){var t=e.target.value||"";A("pincode",t),g(t)},placeholder:"Search Pincode"})})]}),Object(v.jsxs)(O.a,Object(m.a)(Object(m.a)({className:"styled-table",striped:!0,bordered:!0,hover:!0,responsive:!0},Y()),{},{children:[Object(v.jsx)("thead",{children:k.map((function(e){return Object(v.jsx)("tr",Object(m.a)(Object(m.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsx)("th",Object(m.a)(Object(m.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:e.render("Header")}))}))}))}))}),Object(v.jsx)("tbody",Object(m.a)(Object(m.a)({},C()),{},{children:y.map((function(e,t){return D(e),Object(v.jsx)("tr",Object(m.a)(Object(m.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(v.jsx)("td",Object(m.a)(Object(m.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})}n(49);var g=function(e){var t=e.values,n=e.col;return Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsx)("div",{children:e[n]},t)}))})},x=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var N=function(){var e=function(){var e=Object(c.useState)(x()),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){a(x())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),t=(e.height,e.width),n=Object(c.useState)(!1),r=Object(u.a)(n,2),s=r[0],i=r[1],d=Object(c.useState)([]),b=Object(u.a)(d,2),m=b[0],p=b[1],O=Object(c.useState)([]),N=Object(u.a)(O,2),S=N[0],_=N[1],w=Object(c.useState)([]),Y=Object(u.a)(w,2),C=Y[0],k=Y[1],y=Object(c.useState)([]),D=Object(u.a)(y,2),A=D[0],M=D[1],H=Object(c.useState)([{vaccine_name:"COVISHIELD"},{vaccine_name:"COVAXIN"}]),I=Object(u.a)(H,2),P=I[0],B=(I[1],Object(c.useState)("")),F=Object(u.a)(B,2),T=F[0],V=F[1],E=Object(c.useState)(""),L=Object(u.a)(E,2),R=L[0],z=L[1],G=Object(c.useState)(""),J=Object(u.a)(G,2),W=J[0],q=J[1],X=Object(c.useState)(""),K=Object(u.a)(X,2),Q=K[0],U=K[1],Z=Object(c.useState)("All"),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)("All"),ce=Object(u.a)(ne,2),ae=ce[0],re=ce[1],se=Object(c.useState)("All"),ie=Object(u.a)(se,2),oe=ie[0],le=ie[1],ue=Object(c.useState)(!1),de=Object(u.a)(ue,2),je=de[0],be=de[1],fe=a.a.createRef(),me="http://maps.google.com/?q=",pe=function(e,t){return"All"===t?e:(t=parseInt(t),e.map((function(e){return e.sessions.filter((function(e){return e.min_age_limit===t})).length>0?e:void 0})).filter((function(e){return void 0!==e})))},Oe=function(e,t){return"All"===t?e:e.map((function(e){return e.sessions.filter((function(e){return e.vaccine===t})).length>0?e:void 0})).filter((function(e){return void 0!==e}))},ve=function(e,t){return"All"===t?e:e.filter((function(e){return e.fee_type===t}))},he=function(){be(!1),_([]),V(f()().format("DD-MM-YYYY"))};Object(c.useEffect)((function(){V(f()().format("DD-MM-YYYY")),Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()("https://cdn-api.co-vin.in/api/v2/admin/location/states");case 2:t=e.sent,k(t.data.states);case 4:case"end":return e.stop()}}),e)})))()}),[]);var ge=Object(c.useMemo)((function(){return[{Header:"Hospital",columns:[{Header:"Name",accessor:"name",Cell:function(e){return Object(v.jsxs)("a",{href:me+e.value+", "+W+", "+R,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Address",accessor:"address",Cell:function(e){return Object(v.jsxs)("a",{href:me+e.value+", "+W+", "+R,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}},{Header:"Block",accessor:"block_name"},{Header:"Pincode",accessor:"pincode",Cell:function(e){return Object(v.jsxs)("a",{href:me+e.value+", "+W+", "+R,target:"_blank",rel:"noopener noreferrer",children:[" ",e.value," "]})}}]},{Header:"Details",columns:[{Header:"Date",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(v.jsx)(g,{values:t,col:"date"})}},{Header:"Available Capacity",accessor:function(e){var t=[];return e.sessions.map((function(e){return e.available_capacity>0&&t.push(e),null})),t},Cell:function(e){var t=e.cell.value;return Object(v.jsx)(g,{values:t,col:"available_capacity"})}}]}]}),[W,R]),xe=function(e,t){switch(t){case"vaccine":e=Ne(e,"age"),e=Ne(e,"fee");break;case"fee":e=Ne(e,"age"),e=Ne(e,"vaccine");break;case"age":e=Ne(e,"fee"),e=Ne(e,"vaccine");break;default:console.log("Invalid Option")}return e},Ne=function(e,t){var n=e;switch(t){case"age":"All"!==oe&&(n=pe(e,oe));break;case"fee":"All"!==ae&&(n=ve(e,ae));break;case"vaccine":"All"!==ee&&(n=Oe(e,ee));break;default:console.log("Invalid choice")}return n},Se=function(e,n){t<760&&i(!0),z(n),p([]),M([]),he(),Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j()("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+e);case 2:n=t.sent,M(n.data.districts);case 4:case"end":return t.stop()}}),t)})))()},_e=function(e,t){s&&fe.current.scrollIntoView({behavior:"smooth"});var n="";he();var c=T,a=Q;e&&(q(e.target.options[e.target.selectedIndex].text),n=e.target.value,U("Select"===(a=n)?"":a)),t&&V(c=t),Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Select"===a){e.next=7;break}return e.next=3,j()("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+a+"&date="+c);case 3:t=e.sent,r=t.data.centers,n=r.map((function(e){return e.sessions.filter((function(e){return e.available_capacity>0})).length>0?e:void 0})).filter((function(e){return void 0!==e})),p(n),n.length>0?(be(!1),n=Ne(n,"vaccine"),n=Ne(n,"fee"),n=Ne(n,"age"),_(n)):be(!0);case 7:case"end":return e.stop()}var r}),e)})))()},we=function(e){var t="";if("next"===e)t=f()(T,"DD-MM-YYYY").add(6,"d");else{var n=f()(T,"DD-MM-YYYY").subtract(6,"d"),c=f()();t=n.isBefore(c)?c:n}var a=t.format("DD-MM-YYYY");_e("",a)};return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"jumbotron",children:Object(v.jsx)("h1",{children:"COWIN Availability Tracker"})}),Object(v.jsx)("form",{className:"form-inline",children:Object(v.jsxs)("div",{className:"input-group row",children:[Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"State:"}),Object(v.jsxs)("select",{className:"form-control",id:"state",name:"state",onChange:function(e){return Se(e.target.value,e.target.options[e.target.selectedIndex].text)},children:[Object(v.jsx)("option",{children:"Select"}),C.map((function(e,t){return Object(v.jsx)("option",{value:e.state_id,children:e.state_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"District:"}),Object(v.jsxs)("select",{className:"form-control",id:"dist",onChange:function(e){return _e(e)},children:[Object(v.jsx)("option",{children:"Select"}),A.map((function(e,t){return Object(v.jsx)("option",{value:e.district_id,children:e.district_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"Vaccine:"}),Object(v.jsxs)("select",{className:"form-control",id:"vaccine",onChange:function(e){return function(e){s&&fe.current.scrollIntoView({behavior:"smooth"}),te(e);var t=m;t=xe(t,"vaccine"),_(Oe(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),P.map((function(e,t){return Object(v.jsx)("option",{value:e.vaccine_name,children:e.vaccine_name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm",children:[Object(v.jsx)("label",{children:"Fees:"}),Object(v.jsxs)("select",{className:"form-control",id:"sel1",onChange:function(e){return function(e){s&&fe.current.scrollIntoView({behavior:"smooth"}),re(e);var t=m;t=xe(t,"fee"),_(ve(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),[{fee_type:"Free"},{fee_type:"Paid"}].map((function(e,t){return Object(v.jsx)("option",{value:e.fee_type,children:e.fee_type},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group col-sm pb-2",children:[Object(v.jsx)("label",{children:"Age:"}),Object(v.jsxs)("select",{className:"form-control",id:"age",onChange:function(e){return function(e){s&&fe.current.scrollIntoView({behavior:"smooth"}),le(e);var t=m;t=xe(t,"age"),_(pe(t,e))}(e.target.value)},children:[Object(v.jsx)("option",{children:"All"}),[{min_age_limit:18},{min_age_limit:45}].map((function(e,t){return Object(v.jsx)("option",{value:e.min_age_limit,children:e.min_age_limit},t)}))]})]}),Object(v.jsxs)("div",{className:"btn-group-vertical col-sm",children:[Object(v.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm mb-1",disabled:!Q,onClick:function(e){return we("next")},children:[T," ",">>"]}),Object(v.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm mb-1",disabled:!Q,onClick:function(e){return we("prev")},children:[f()(T,"DD-MM-YYYY").add(6,"d").format("DD-MM-YYYY")," ","<<"]})]})]})}),Object(v.jsx)("div",{id:"mainTable",ref:fe,children:Object(v.jsx)(h,{columns:ge,data:S})}),Object(v.jsx)("br",{}),je&&Object(v.jsxs)("p",{className:"error",children:[" ","No Vaccination center is available for booking."," "]})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(50);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(N,{})}),document.getElementById("root")),S()}},[[51,1,2]]]);
//# sourceMappingURL=main.263ce0ec.chunk.js.map